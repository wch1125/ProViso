import{u as b,j as e,d as U,a as V,b as L,c as q,e as G,D as H}from"./index-BQHo3lY-.js";import{T as _}from"./TopNav-x9KqDvYR.js";import{h as E,i as D,j as A,k as W,L as K,l as z,m as Q,F as k,n as $,o as Y,p as Z,A as X,T as J,q as ee,M as te,r as se,d as ae}from"./vendor-icons-SDImLkab.js";import{H as R,D as re}from"./DiffViewer-ypfMvfkr.js";import{r as f}from"./vendor-react-C-GM1j7h.js";import"./Modal-C3WxPkda.js";const y=[{id:1,title:"The Reveal",subtitle:"Legal prose meets executable code",icon:"reveal"},{id:2,title:"The Power",subtitle:"Run real commands, get instant answers",icon:"power"},{id:3,title:"Negotiation",subtitle:"Track every change, understand impact",icon:"negotiate"},{id:4,title:"Single Source",subtitle:"From code to closing checklist",icon:"close"}],O={1:[{title:"The Problem",content:'Credit agreements are 200+ page documents full of definitions, covenants, and conditions. When the CFO asks "Can we make this acquisition?", lawyers spend days finding the answer. What if the agreement itself could answer instantly?',hint:"Click Next to see the transformation"},{title:"Traditional Language",content:"Here's how a typical covenant reads in legal prose. Dense, reference-heavy, and impossible to compute. Every compliance check requires manual review.",hint:"Compare with the code on the right"},{title:"ProViso Code",content:"Same terms. Same legal meaning. But now it's executable. The computer can check compliance, calculate headroom, and simulate proposed transactions in milliseconds.",hint:"Click Next to see it in action"}],2:[{title:"Interactive Terminal",content:"This terminal runs real ProViso commands against the credit agreement. No mock data, no hardcoded responses—the interpreter is executing live in your browser.",hint:"Try clicking a suggested command or type your own"},{title:"Compliance at a Glance",content:"The `status` command gives you a complete compliance snapshot. Every covenant, every basket, with headroom calculations done instantly.",hint:'Try running "check" for detailed covenant analysis'},{title:"Basket Tracking",content:"Baskets limit what the borrower can do—investments, dividends, acquisitions. ProViso tracks utilization in real-time and shows available capacity.",hint:'Try "query GeneralInvestments 10000000" to check if a $10M investment is permitted'},{title:"Pro Forma Analysis",content:'Before any major transaction, you need to know: "Will this breach a covenant?" The `simulate` command shows pro forma impact on every metric.',hint:'Try "simulate SeniorDebt=180000000" to see what happens with $20M more debt'}],3:[{title:"Negotiation Tracking",content:"Credit agreements go through multiple rounds of negotiation. Each side proposes changes. Tracking who changed what—and understanding the impact—is critical.",hint:"Select versions to compare"},{title:"Borrower Markup",content:"The borrower's counsel proposed these changes to the lender's initial draft. ProViso automatically detects every modification and classifies the impact.",hint:"Green lines are additions, red are removals"},{title:"Lender Counter",content:"The lender countered with compromises. Notice how ProViso shows exactly which proposals were accepted, modified, or rejected.",hint:"Click changes to see financial impact"}],4:[{title:"Conditions Precedent",content:"Before any loan can fund, dozens of conditions must be satisfied: documents executed, opinions delivered, certificates provided. These come directly from the credit agreement.",hint:"See how code becomes a closing checklist"},{title:"Single Source of Truth",content:"The ProViso file is the single source of truth. Conditions precedent are extracted from the code, not maintained in a separate spreadsheet that can drift out of sync.",hint:"When the agreement changes, the checklist updates automatically"}]},ne={maxLeverage:`
Section 7.11(a) Maximum Leverage Ratio.

The Borrower shall not permit the Leverage Ratio, determined as of the last day
of any fiscal quarter, to exceed the ratio set forth below opposite such fiscal
quarter:

  Fiscal Quarter Ending                    Maximum Leverage Ratio
  ---------------------                    ----------------------
  Closing Date through December 31, 2025         5.00 to 1.00
  March 31, 2026 and thereafter                  4.75 to 1.00

For purposes of this Section, "Leverage Ratio" means, as of any date of
determination, the ratio of (a) Total Debt as of such date to (b) Consolidated
EBITDA for the period of four consecutive fiscal quarters ending on or most
recently ended prior to such date.
  `.trim()},S=[{id:"cp-1",section:"4.01(a)",title:"Certificate of Incorporation",description:"Certified copy from Secretary of State",responsible:"Borrower",status:"satisfied"},{id:"cp-2",section:"4.01(b)",title:"Bylaws",description:"Certified copy of current bylaws",responsible:"Borrower",status:"satisfied"},{id:"cp-3",section:"4.01(c)",title:"Board Resolutions",description:"Authorizing execution of Loan Documents",responsible:"Borrower",status:"satisfied"},{id:"cp-4",section:"4.01(d)",title:"Good Standing Certificate",description:"From state of incorporation",responsible:"Borrower",status:"pending"},{id:"cp-5",section:"4.01(e)",title:"Credit Agreement",description:"Fully executed by all parties",responsible:"All Parties",status:"pending"},{id:"cp-6",section:"4.01(f)",title:"Security Agreement",description:"Granting security interest in collateral",responsible:"Borrower Counsel",status:"satisfied"},{id:"cp-7",section:"4.01(g)",title:"Legal Opinion",description:"Opinion of borrower counsel",responsible:"Davis Polk",status:"pending"},{id:"cp-8",section:"4.01(h)",title:"Insurance Certificate",description:"Evidencing required coverage",responsible:"Borrower",status:"pending"}],oe=`
CONDITIONS_PRECEDENT InitialFunding
  SECTION "4.01"

  CP CertificateOfIncorporation
    DESCRIPTION "Certified copy from Secretary of State"
    RESPONSIBLE Borrower

  CP Bylaws
    DESCRIPTION "Certified copy of current bylaws"
    RESPONSIBLE Borrower

  CP BoardResolutions
    DESCRIPTION "Authorizing execution of Loan Documents"
    RESPONSIBLE Borrower

  CP GoodStandingCertificate
    DESCRIPTION "From state of incorporation"
    RESPONSIBLE Borrower

  CP CreditAgreement
    DESCRIPTION "Fully executed by all parties"
    RESPONSIBLE "All Parties"

  CP SecurityAgreement
    DESCRIPTION "Granting security interest in collateral"
    RESPONSIBLE BorrowerCounsel

  CP LegalOpinion
    DESCRIPTION "Opinion of borrower counsel"
    RESPONSIBLE "Davis Polk"

  CP InsuranceCertificate
    DESCRIPTION "Evidencing required coverage"
    RESPONSIBLE Borrower
`.trim(),T=[{label:"v1 - Lender Initial Draft",short:"v1"},{label:"v2 - Borrower Markup",short:"v2"},{label:"v3 - Lender Counter",short:"v3"}];function ie(t){return y.find(s=>s.id===t)??y[0]}function le(t,s){const r=O[t];return r[s-1]??r[0]}function I(t){return O[t].length}const ce={reveal:W,power:A,negotiate:D,close:E};function de(){const{currentAct:t,currentStep:s,setAct:r,maxActVisited:a}=b();return e.jsx("div",{className:"bg-surface-2 border-b border-border-DEFAULT",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4",children:e.jsxs("nav",{className:"flex items-center justify-between py-3",children:[e.jsx("div",{className:"flex items-center gap-1",children:y.map(n=>{const i=ce[n.icon],o=t===n.id,l=n.id<=a,c=I(n.id);return e.jsxs("button",{onClick:()=>l&&r(n.id),disabled:!l,className:`
                    relative flex items-center gap-2 px-4 py-2 rounded-lg
                    transition-all duration-200
                    ${o?"bg-gold-600/20 text-gold-400 border border-gold-600/30":l?"text-text-secondary hover:bg-surface-3 hover:text-text-primary":"text-text-muted opacity-50 cursor-not-allowed"}
                  `,children:[e.jsx(i,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsxs("span",{className:"text-xs font-medium",children:["Act ",n.id]}),e.jsx("span",{className:"text-xs opacity-70",children:n.title})]}),o&&e.jsx("div",{className:"flex gap-0.5 ml-2",children:Array.from({length:c},(x,u)=>e.jsx("div",{className:`
                            w-1.5 h-1.5 rounded-full transition-colors
                            ${u+1<=s?"bg-gold-400":"bg-gold-400/30"}
                          `},u))})]},n.id)})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(me,{currentAct:t,currentStep:s})})]})})})}function me({currentAct:t,currentStep:s}){let r=0,a=0;for(const i of y){const o=I(i.id);a+=o,i.id<t?r+=o:i.id===t&&(r+=s-1)}const n=a>0?r/a*100:0;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-1.5 bg-surface-3 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gold-500 rounded-full transition-all duration-300",style:{width:`${n}%`}})}),e.jsxs("span",{className:"text-xs text-text-muted",children:[Math.round(n),"%"]})]})}function ue(){const{currentAct:t,currentStep:s,nextStep:r,prevStep:a}=b(),n=le(t,s),i=ie(t),o=I(t),l=t===1&&s===1,c=t===4&&s===o;return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 pb-4",children:e.jsxs("div",{className:`
            bg-surface-2/95 backdrop-blur-sm
            border border-border-DEFAULT rounded-xl
            shadow-2xl shadow-black/20
            overflow-hidden
          `,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-border-DEFAULT bg-surface-3/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gold-400",children:["Act ",t,": ",i.title]}),e.jsx("span",{className:"text-text-muted",children:"|"}),e.jsxs("span",{className:"text-xs text-text-tertiary",children:["Step ",s," of ",o]})]}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:o},(x,u)=>e.jsx("div",{className:`
                    w-2 h-2 rounded-full transition-colors
                    ${u+1===s?"bg-gold-400":u+1<s?"bg-gold-400/50":"bg-surface-4"}
                  `},u))})]}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:n.title}),e.jsx("p",{className:"text-text-secondary leading-relaxed",children:n.content}),n.hint&&e.jsxs("div",{className:"flex items-start gap-2 mt-3 text-sm text-gold-400/80",children:[e.jsx(K,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:n.hint})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border-DEFAULT bg-surface-3/30",children:[e.jsxs("button",{onClick:a,disabled:l,className:`
                flex items-center gap-1 px-3 py-1.5 rounded-lg
                text-sm font-medium transition-colors
                ${l?"text-text-muted cursor-not-allowed":"text-text-secondary hover:text-text-primary hover:bg-surface-3"}
              `,children:[e.jsx(z,{className:"w-4 h-4"}),"Back"]}),e.jsx("button",{onClick:r,disabled:c,className:`
                flex items-center gap-1 px-4 py-1.5 rounded-lg
                text-sm font-medium transition-colors
                ${c?"bg-success/20 text-success":"bg-gold-600 text-navy-900 hover:bg-gold-500"}
              `,children:c?"Demo Complete!":e.jsxs(e.Fragment,{children:["Next",e.jsx(Q,{className:"w-4 h-4"})]})})]})]})})})}function xe(){const{currentStep:t}=b(),s=U[2],r=s==null?void 0:s.creditLangCode,a=ne.maxLeverage;return t===1?e.jsx(pe,{}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 min-h-0",children:[e.jsxs("div",{className:`
            flex flex-col rounded-xl border overflow-hidden transition-all duration-500
            ${t===2?"border-gold-600/50 bg-surface-2":"border-border-DEFAULT bg-surface-2/50"}
          `,children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-border-DEFAULT bg-surface-3/50",children:[e.jsx(k,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Legal Document"}),e.jsx("span",{className:"text-xs text-text-muted ml-auto",children:".docx"})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:e.jsx("pre",{className:"text-sm text-text-secondary leading-relaxed whitespace-pre-wrap font-serif",children:a})})]}),e.jsxs("div",{className:`
            flex flex-col rounded-xl border overflow-hidden transition-all duration-500
            ${t===3?"border-gold-600/50 bg-surface-2":"border-border-DEFAULT bg-surface-2/50"}
          `,children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-border-DEFAULT bg-surface-3/50",children:[e.jsx($,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"ProViso Code"}),e.jsx("span",{className:"text-xs text-text-muted ml-auto",children:".proviso"})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 bg-slate-900/50",children:e.jsx(R,{code:r,showLineNumbers:!0})})]})]}),e.jsx("div",{className:"mt-4 p-4 rounded-lg bg-gold-600/10 border border-gold-600/20",children:e.jsx("p",{className:"text-sm text-gold-400",children:t===2?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Dense legal prose."})," Cross-references, defined terms, nested conditions. Every compliance check requires manual review by expensive lawyers."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Same terms, but executable."})," The computer can now check compliance, calculate headroom, and simulate proposed transactions in milliseconds."]})})})]})}function pe(){return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"max-w-xl text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gold-600/20 border border-gold-600/30 flex items-center justify-center",children:e.jsx(k,{className:"w-10 h-10 text-gold-400"})}),e.jsx("h2",{className:"text-2xl font-semibold text-text-primary mb-4",children:"Credit Agreements Today"}),e.jsxs("p",{className:"text-text-secondary leading-relaxed mb-6",children:["200+ page documents full of definitions, covenants, and conditions. When the CFO asks ",e.jsx("span",{className:"text-gold-400",children:'"Can we make this acquisition?"'}),", lawyers spend days finding the answer."]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-text-muted",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-surface-3 flex items-center justify-center",children:"1"}),e.jsx("span",{children:"Parse legal text"})]}),e.jsx("span",{className:"text-gold-600",children:"→"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-surface-3 flex items-center justify-center",children:"2"}),e.jsx("span",{children:"Cross-reference definitions"})]}),e.jsx("span",{className:"text-gold-600",children:"→"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-surface-3 flex items-center justify-center",children:"3"}),e.jsx("span",{children:"Calculate manually"})]})]})]})})}function he(t){const s=t.trim(),r=s.split(/\s+/),a=(r[0]??"").toLowerCase(),n=r.slice(1);return{name:a,args:n,raw:s}}function m(t){return Math.abs(t)>=1e6?`$${(t/1e6).toFixed(1)}M`:Math.abs(t)>=1e3?`$${(t/1e3).toFixed(0)}K`:`$${t.toFixed(0)}`}function g(t){return`${t.toFixed(2)}x`}function F(t,s){return s?g(Math.abs(t)):m(Math.abs(t))}function C(t){return t?"[PASS]":"[FAIL]"}function fe(t){const s=t.checkAllCovenants(),r=t.getAllBasketStatuses(),a=[];a.push("=".repeat(50)),a.push("  PROVISO STATUS REPORT"),a.push("=".repeat(50)),a.push(""),a.push("COVENANTS"),a.push("-".repeat(50));const n=s.every(o=>o.compliant),i=s.filter(o=>!o.compliant).length;n?a.push("  Status: ALL COVENANTS PASSING"):a.push(`  Status: ${i} COVENANT${i>1?"S":""} IN BREACH`),a.push("");for(const o of s){const l=C(o.compliant),c=o.actual<100,x=c?g(o.actual):m(o.actual),u=c?g(o.threshold):m(o.threshold),h=o.headroom!==void 0?` (headroom: ${F(o.headroom,c)})`:"";a.push(`  ${l} ${o.name}`),a.push(`      Actual: ${x} ${o.operator} ${u}${h}`)}a.push(""),a.push("BASKETS"),a.push("-".repeat(50));for(const o of r){const l=o.capacity>0?(o.used/o.capacity*100).toFixed(0):"0",c=o.capacity-o.used;a.push(`  ${o.name}`),a.push(`      Capacity: ${m(o.capacity)}`),a.push(`      Used: ${m(o.used)} (${l}%)`),a.push(`      Available: ${m(c)}`)}return a.push(""),a.push("=".repeat(50)),a.join(`
`)}function ge(t){const s=[];s.push("COVENANT COMPLIANCE CHECK"),s.push("-".repeat(40)),s.push("");const r=t.every(a=>a.compliant);for(const a of t){const n=C(a.compliant),i=a.actual<100,o=i?g(a.actual):m(a.actual),l=i?g(a.threshold):m(a.threshold);if(s.push(`${n} ${a.name}`),s.push(`   ${o} ${a.operator} ${l}`),a.headroom!==void 0){const c=a.compliant?"Headroom":"Shortfall";s.push(`   ${c}: ${F(a.headroom,i)}`)}s.push("")}if(r)s.push("Result: ALL COVENANTS PASSING");else{const a=t.filter(n=>!n.compliant).length;s.push(`Result: ${a} COVENANT${a>1?"S":""} IN BREACH`)}return s.join(`
`)}function be(t){const s=[];s.push("BASKET UTILIZATION"),s.push("-".repeat(40)),s.push("");for(const r of t){const a=r.capacity>0?(r.used/r.capacity*100).toFixed(0):"0",n=r.capacity-r.used,i=20,o=Math.round(r.used/r.capacity*i),l="["+"=".repeat(o)+" ".repeat(i-o)+"]";s.push(`${r.name}`),s.push(`  ${l} ${a}%`),s.push(`  Capacity:  ${m(r.capacity)}`),s.push(`  Used:      ${m(r.used)}`),s.push(`  Available: ${m(n)}`),s.push("")}return s.join(`
`)}function Ne(t,s){const r=[];r.push("PRO FORMA SIMULATION"),r.push("-".repeat(40)),r.push(""),r.push("Proposed Changes:");for(const[l,c]of Object.entries(s))r.push(`  ${l}: ${m(c)}`);r.push("");const a=t.checkAllCovenants(),n={};for(const l of Object.keys(s))try{const c=t.evaluate(l);n[l]=c}catch{n[l]=NaN}t.loadFinancials(s);const i=t.checkAllCovenants();r.push("Pro Forma Impact:"),r.push("");for(let l=0;l<a.length;l++){const c=a[l],x=i[l],u=c.actual<100,h=u?g(c.actual):m(c.actual),N=u?g(x.actual):m(x.actual),j=C(c.compliant),w=C(x.compliant);r.push(`${c.name}`),r.push(`  Current:   ${h} ${j}`),r.push(`  Pro Forma: ${N} ${w}`),c.compliant&&!x.compliant?r.push("  WARNING: Would breach covenant!"):!c.compliant&&x.compliant&&r.push("  NOTE: Would cure breach"),r.push("")}const o={};for(const[l,c]of Object.entries(n))isNaN(c)||(o[l]=c);return Object.keys(o).length>0&&t.loadFinancials(o),r.join(`
`)}function je(t,s,r){const a=t.getAllBasketStatuses(),n=a.find(c=>c.name.toLowerCase()===s.toLowerCase()||c.name.toLowerCase().includes(s.toLowerCase()));if(!n)return`Error: Basket "${s}" not found.
Available baskets: ${a.map(c=>c.name).join(", ")}`;const i=n.capacity-n.used,o=r<=i,l=[];return l.push("BASKET QUERY"),l.push("-".repeat(40)),l.push(""),l.push(`Basket: ${n.name}`),l.push(`Requested Amount: ${m(r)}`),l.push(`Available Capacity: ${m(i)}`),l.push(""),o?(l.push("Result: PERMITTED"),l.push(`Remaining after use: ${m(i-r)}`)):(l.push("Result: NOT PERMITTED"),l.push(`Shortfall: ${m(r-i)}`)),l.join(`
`)}const ve=`
PROVISO DEMO COMMANDS
=====================

  status      Full compliance report (covenants + baskets)
  check       Covenant compliance check with headroom
  baskets     Basket utilization summary
  simulate    Pro forma impact analysis
              Usage: simulate <key>=<value> [<key>=<value> ...]
              Example: simulate SeniorDebt=180000000
  query       Check if an action is permitted
              Usage: query <basket_name> <amount>
              Example: query Investments 5000000
  help        Show this help message
  clear       Clear terminal history

Examples:
  > status
  > check
  > baskets
  > simulate SeniorDebt=180000000
  > query GeneralInvestments 10000000
`.trim();function ye(t,s){const{name:r,args:a}=he(t);if(r==="help"||r==="?")return{output:ve,type:"info"};if(r==="clear"||r==="cls")return{output:"",type:"clear"};if(!s)return{output:"Error: Interpreter not loaded. Please wait for initialization.",type:"error"};switch(r){case"status":return{output:fe(s),type:"success"};case"check":{const n=s.checkAllCovenants();return{output:ge(n),type:"success"}}case"baskets":{const n=s.getAllBasketStatuses();return{output:be(n),type:"success"}}case"simulate":{if(a.length===0)return{output:`Usage: simulate <key>=<value> [<key>=<value> ...]
Example: simulate SeniorDebt=180000000`,type:"error"};const n={};for(const i of a){const[o,l]=i.split("=");if(!o||!l)return{output:`Invalid argument: "${i}". Use format: key=value`,type:"error"};const c=parseFloat(l.replace(/[_,]/g,""));if(isNaN(c))return{output:`Invalid number: "${l}"`,type:"error"};n[o]=c}return{output:Ne(s,n),type:"success"}}case"query":{if(a.length<2)return{output:`Usage: query <basket_name> <amount>
Example: query GeneralInvestments 5000000`,type:"error"};const n=a[0],i=parseFloat((a[1]??"").replace(/[_,]/g,""));return isNaN(i)?{output:`Invalid amount: "${a[1]}"`,type:"error"}:{output:je(s,n,i),type:"success"}}default:return{output:`Unknown command: "${r}". Type "help" for available commands.`,type:"error"}}}function Ce(){return[{command:"status",description:"Full compliance report"},{command:"check",description:"Covenant check"},{command:"baskets",description:"Basket utilization"},{command:"simulate SeniorDebt=180000000",description:"Pro forma +$20M debt"},{command:"query GeneralInvestments 10000000",description:"Check $10M investment"}]}function we({entries:t}){return t.length===0?e.jsx("div",{className:"text-text-muted text-sm italic",children:"Type a command or click a suggestion below..."}):e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsx(Se,{entry:s},s.id))})}function Se({entry:t}){switch(t.type){case"command":return e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gold-400 font-mono select-none",children:"$"}),e.jsx("span",{className:"text-text-primary font-mono",children:t.content})]});case"output":return e.jsx("div",{className:"pl-4 font-mono text-sm whitespace-pre-wrap",children:e.jsx(Te,{content:t.content})});case"error":return e.jsx("div",{className:"pl-4 font-mono text-sm text-danger whitespace-pre-wrap",children:t.content});case"info":return e.jsx("div",{className:"pl-4 font-mono text-sm text-info whitespace-pre-wrap",children:t.content});default:return null}}function Te({content:t}){const s=t.split(`
`);return e.jsx(e.Fragment,{children:s.map((r,a)=>e.jsx("div",{children:e.jsx(Ee,{line:r})},a))})}function Ee({line:t}){const s=[{regex:/\[PASS\]/g,className:"text-success font-semibold"},{regex:/\[FAIL\]/g,className:"text-danger font-semibold"},{regex:/^[=-]{20,}$/g,className:"text-text-muted"},{regex:/^(COVENANTS|BASKETS|COVENANT COMPLIANCE CHECK|BASKET UTILIZATION|PRO FORMA SIMULATION|BASKET QUERY|PROVISO STATUS REPORT|PRO FORMA IMPACT|PROVISO DEMO COMMANDS)$/g,className:"text-gold-400 font-semibold"},{regex:/\$[\d,.]+[KMB]?/g,className:"text-info"},{regex:/[\d.]+x/g,className:"text-info"},{regex:/[\d.]+%/g,className:"text-info"},{regex:/\b(PASSING|PERMITTED|Result:)/g,className:"text-success"},{regex:/\b(BREACH|NOT PERMITTED|FAIL|WARNING:)/g,className:"text-danger"},{regex:/\b(Shortfall|Would breach)/g,className:"text-danger"},{regex:/\b(Headroom|Would cure|NOTE:)/g,className:"text-success"},{regex:/\b(Actual|Required|Capacity|Used|Available|Current|Pro Forma|Requested Amount|Available Capacity):/g,className:"text-text-tertiary"},{regex:/^\s{2}(status|check|baskets|simulate|query|help|clear)\s/g,className:"text-gold-400 font-mono"}],r=[];for(const{regex:i,className:o}of s){i.lastIndex=0;let l;for(;(l=i.exec(t))!==null;)r.push({start:l.index,end:l.index+l[0].length,className:o})}if(r.length===0)return e.jsx("span",{className:"text-text-secondary",children:t});r.sort((i,o)=>i.start-o.start);const a=[];let n=0;for(const i of r)i.start>n&&a.push(e.jsx("span",{className:"text-text-secondary",children:t.slice(n,i.start)},`text-${n}`)),!(i.start<n)&&(a.push(e.jsx("span",{className:i.className,children:t.slice(i.start,i.end)},`hl-${i.start}`)),n=i.end);return n<t.length&&a.push(e.jsx("span",{className:"text-text-secondary",children:t.slice(n)},`text-${n}`)),e.jsx(e.Fragment,{children:a})}function Ae({onCommandClick:t,disabled:s=!1}){const r=Ce();return e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map((a,n)=>e.jsxs("button",{onClick:()=>t(a.command),disabled:s,className:`
            group flex items-center gap-2 px-3 py-1.5
            bg-surface-3 hover:bg-surface-4
            border border-border-DEFAULT hover:border-gold-600/50
            rounded-lg transition-all duration-200
            ${s?"opacity-50 cursor-not-allowed":""}
          `,title:a.description,children:[e.jsx(A,{className:"w-3.5 h-3.5 text-gold-400"}),e.jsx("code",{className:"text-xs font-mono text-text-secondary group-hover:text-text-primary",children:a.command})]},n))})}function ke(){const[t,s]=f.useState(""),r=f.useRef(null),a=f.useRef(null),{terminalHistory:n,addTerminalEntry:i,clearTerminal:o,addCommandToHistory:l,navigateCommandHistory:c,resetCommandHistoryIndex:x}=V(),{interpreter:u,isLoading:h,error:N}=L();f.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[n]),f.useEffect(()=>{var d;(d=r.current)==null||d.focus()},[]);const j=f.useCallback(d=>{const p=d.trim();if(!p)return;i({type:"command",content:p}),l(p);const v=ye(p,u);v.type==="clear"?o():i({type:v.type==="error"?"error":v.type==="info"?"info":"output",content:v.output}),s(""),x()},[u,i,l,o,x]),w=d=>{d.preventDefault(),j(t)},B=d=>{if(d.key==="ArrowUp"){d.preventDefault();const p=c("up");s(p)}else if(d.key==="ArrowDown"){d.preventDefault();const p=c("down");s(p)}},M=d=>{var p;j(d),(p=r.current)==null||p.focus()};return e.jsxs("div",{className:"flex flex-col h-full bg-surface-1 rounded-xl border border-border-DEFAULT overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-surface-2 border-b border-border-DEFAULT",children:[e.jsx(A,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"ProViso Terminal"}),h&&e.jsx(Y,{className:"w-4 h-4 text-gold-400 animate-spin ml-auto"})]}),N&&e.jsxs("div",{className:"flex items-start gap-2 px-4 py-3 bg-red-500/10 border-b border-red-500/20",children:[e.jsx(Z,{className:"w-4 h-4 text-red-400 mt-0.5 shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-red-400 font-medium",children:"Interpreter failed to load"}),e.jsx("p",{className:"text-red-400/70 text-xs mt-1 font-mono",children:N})]})]}),e.jsx("div",{ref:a,className:"flex-1 overflow-y-auto p-4 font-mono text-sm",onClick:()=>{var d;return(d=r.current)==null?void 0:d.focus()},children:e.jsx(we,{entries:n})}),e.jsxs("div",{className:"border-t border-border-DEFAULT",children:[e.jsxs("form",{onSubmit:w,className:"flex items-center gap-2 px-4 py-3",children:[e.jsx("span",{className:"text-gold-400 font-mono select-none",children:"$"}),e.jsx("input",{ref:r,type:"text",value:t,onChange:d=>s(d.target.value),onKeyDown:B,placeholder:"Type a command...",disabled:h,className:`
              flex-1 bg-transparent border-none outline-none
              font-mono text-text-primary placeholder:text-text-muted
              disabled:opacity-50
            `,autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:"px-4 pb-3",children:[e.jsx("p",{className:"text-xs text-text-muted mb-2",children:"Try these commands:"}),e.jsx(Ae,{onCommandClick:M,disabled:h})]})]})]})}function Ie(){var x,u;const{currentStep:t}=b(),{getVersionCode:s}=L(),[r,a]=f.useState(0),[n,i]=f.useState(1);f.useMemo(()=>{t===2?(a(0),i(1)):t===3&&(a(1),i(2))},[t]);const o=s(r),l=s(n),c=f.useMemo(()=>r===0&&n===1?q:r===1&&n===2?G:null,[r,n]);return t===1?e.jsx(Pe,{}):e.jsxs("div",{className:"flex flex-col h-full gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{value:r,onChange:a,max:n-1,label:"From"}),e.jsx(X,{className:"w-5 h-5 text-text-muted"}),e.jsx(P,{value:n,onChange:i,min:r+1,label:"To"})]}),c&&e.jsx(Le,{summary:c})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4 min-h-0",children:[e.jsx("div",{className:"col-span-2 min-h-0",children:e.jsx(re,{fromCode:o,toCode:l,fromLabel:((x=T[r])==null?void 0:x.short)??`v${r+1}`,toLabel:((u=T[n])==null?void 0:u.short)??`v${n+1}`,maxHeight:"100%"})}),e.jsxs("div",{className:"overflow-hidden flex flex-col bg-surface-2 rounded-xl border border-border-DEFAULT",children:[e.jsx("div",{className:"px-4 py-3 border-b border-border-DEFAULT bg-surface-3/50",children:e.jsxs("h3",{className:"text-sm font-medium text-text-secondary",children:[(c==null?void 0:c.totalChanges)??0," Changes Detected"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:c==null?void 0:c.changes.map(h=>e.jsx(De,{change:h},h.id))})]})]})]})}function Pe(){return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"max-w-xl text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gold-600/20 border border-gold-600/30 flex items-center justify-center",children:e.jsx(D,{className:"w-10 h-10 text-gold-400"})}),e.jsx("h2",{className:"text-2xl font-semibold text-text-primary mb-4",children:"Negotiation Tracking"}),e.jsx("p",{className:"text-text-secondary leading-relaxed mb-6",children:"Credit agreements go through multiple rounds of negotiation. Each side proposes changes. Tracking who changed what—and understanding the impact—is critical."}),e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-text-muted",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),e.jsx("span",{children:"Borrower favorable"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-text-muted",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-danger"}),e.jsx("span",{children:"Lender favorable"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-text-muted",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-text-muted"}),e.jsx("span",{children:"Neutral"})]})]})]})})}function P({value:t,onChange:s,min:r=0,max:a=2,label:n}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-text-muted",children:[n,":"]}),e.jsx("select",{value:t,onChange:i=>s(parseInt(i.target.value,10)),className:`
          px-3 py-1.5 text-sm font-medium
          bg-surface-3 border border-border-DEFAULT rounded-lg
          text-text-primary
          focus:outline-none focus:ring-2 focus:ring-gold-600/50
        `,children:T.map((i,o)=>e.jsx("option",{value:o,disabled:o<r||o>a,children:i.label},o))})]})}function Le({summary:t}){return e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:"text-text-muted",children:["By ",t.authorParty]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.borrowerFavorable>0&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-success/20 text-success text-xs",children:[e.jsx(J,{className:"w-3 h-3"}),t.borrowerFavorable," borrower"]}),t.lenderFavorable>0&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-danger/20 text-danger text-xs",children:[e.jsx(ee,{className:"w-3 h-3"}),t.lenderFavorable," lender"]}),t.neutral>0&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-surface-4 text-text-muted text-xs",children:[e.jsx(te,{className:"w-3 h-3"}),t.neutral," neutral"]})]})]})}function De({change:t}){const s={borrower_favorable:"border-l-success bg-success/5",lender_favorable:"border-l-danger bg-danger/5",neutral:"border-l-text-muted bg-surface-3/50",unclear:"border-l-warning bg-warning/5"},a={added:{text:"Added",color:"text-success"},removed:{text:"Removed",color:"text-danger"},modified:{text:"Modified",color:"text-warning"}}[t.changeType];return e.jsxs("div",{className:`
        p-3 mb-2 rounded-lg border-l-4
        ${s[t.impact]}
      `,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-text-secondary",children:t.elementName}),e.jsx("span",{className:`text-xs font-medium ${a.color}`,children:a.text})]}),e.jsx("p",{className:"text-xs text-text-muted mb-2 line-clamp-2",children:t.description}),t.impactDescription&&e.jsx("p",{className:"text-xs text-text-tertiary italic",children:t.impactDescription})]})}function $e(){const{currentStep:t}=b();return t===1?e.jsx(Re,{}):e.jsxs("div",{className:"flex flex-col h-full gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Conditions Precedent"}),e.jsx("p",{className:"text-sm text-text-muted",children:"Extracted from ProViso code"})]}),e.jsx(Oe,{})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 min-h-0",children:[e.jsxs("div",{className:"flex flex-col rounded-xl border border-border-DEFAULT overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-border-DEFAULT bg-surface-3/50",children:[e.jsx($,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Source Code"}),e.jsx("span",{className:"text-xs text-text-muted ml-auto",children:".proviso"})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 bg-slate-900/50",children:e.jsx(R,{code:oe,showLineNumbers:!0})})]}),e.jsxs("div",{className:"flex flex-col rounded-xl border border-border-DEFAULT overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-border-DEFAULT bg-surface-3/50",children:[e.jsx(E,{className:"w-4 h-4 text-gold-400"}),e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Generated Checklist"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:S.map(s=>e.jsx(Fe,{cp:s},s.id))})]})]}),e.jsx("div",{className:"p-4 rounded-lg bg-gold-600/10 border border-gold-600/20",children:e.jsxs("p",{className:"text-sm text-gold-400",children:[e.jsx("strong",{children:"Single source of truth."})," When the agreement changes, the checklist updates automatically. No spreadsheets drifting out of sync. No manual reconciliation."]})})]})}function Re(){return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"max-w-xl text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gold-600/20 border border-gold-600/30 flex items-center justify-center",children:e.jsx(E,{className:"w-10 h-10 text-gold-400"})}),e.jsx("h2",{className:"text-2xl font-semibold text-text-primary mb-4",children:"From Code to Closing"}),e.jsx("p",{className:"text-text-secondary leading-relaxed mb-6",children:"Before any loan can fund, dozens of conditions must be satisfied: documents executed, opinions delivered, certificates provided. These requirements come directly from the credit agreement."}),e.jsx("div",{className:"flex flex-col items-center gap-3 text-sm text-text-muted",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-surface-3",children:"ProViso Code"}),e.jsx("span",{className:"text-gold-600",children:"→"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-surface-3",children:"CP Checklist"}),e.jsx("span",{className:"text-gold-600",children:"→"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-surface-3",children:"Closing Ready"})]})})]})})}function Oe(){const t=S.filter(a=>a.status==="satisfied").length,s=S.length,r=Math.round(t/s*100);return e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-surface-3 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-success rounded-full transition-all",style:{width:`${r}%`}})}),e.jsxs("span",{className:"text-sm text-text-muted",children:[t,"/",s," satisfied"]})]})})}function Fe({cp:t}){const s=t.status==="satisfied";return e.jsxs("div",{className:`
        flex items-start gap-3 p-3 mb-2 rounded-lg border transition-colors
        ${s?"border-success/30 bg-success/5":"border-border-DEFAULT bg-surface-3/30"}
      `,children:[e.jsx("div",{className:`
          w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0
          ${s?"bg-success text-white":"bg-surface-4 text-text-muted"}
        `,children:s?e.jsx(se,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-mono text-text-muted",children:t.section}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:t.title})]}),e.jsx("p",{className:"text-xs text-text-secondary mb-1",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-3 h-3 text-text-muted"}),e.jsx("span",{className:"text-xs text-text-muted",children:t.responsible})]})]})]})}function Be(){const{currentAct:t}=b();return e.jsxs("div",{className:"min-h-screen bg-surface-0 flex flex-col",children:[e.jsx(_,{breadcrumbs:[{label:"Interactive Demo"}]}),e.jsx(de,{}),e.jsx("main",{className:"flex-1 max-w-6xl w-full mx-auto px-4 py-6 pb-40",children:e.jsx(Me,{act:t})}),e.jsx(ue,{})]})}function Me({act:t}){switch(t){case 1:return e.jsx(xe,{});case 2:return e.jsx(ke,{});case 3:return e.jsx(Ie,{});case 4:return e.jsx($e,{});default:return null}}function We(){return e.jsx(H,{children:e.jsx(Be,{})})}export{We as GuidedDemo,We as default};
